@model List<Todoku.Models.PurchaseOrderHd>

@{
    ViewBag.Title = "Todoku";
}

<script type="text/javascript">
    $('body').on('click', ".btnConfirm", function () {
        $data = $(this).closest("div");
        var data = { OrderID : $data.find(".keyField").val(), AgentID: $data.find("#item_AgentID").val() };
        OnSaveData('@Url.Content("~/Admin/PaymentConfirm")', data, function () {
            window.location.href = '@Url.Content("~/Members/Admin/")';
        });
    });

    $('body').on('click', ".btnVoid", function () {
        $data = $(this).closest("div");
        var data = { OrderID: $data.find(".keyField").val()};
        OnSaveData('@Url.Content("~/Admin/PaymentVoid")', data, function () {
            window.location.href = '@Url.Content("~/Members/Admin/")';
        });
    });

</script>

<h2>Konfirmasi Pembayaran</h2>

@foreach (var item in Model)
{ 
    <div style="border:1px solid black; margin-bottom:3px;">
        @Html.HiddenFor(model => item.OrderID, new { @class="keyField" })        
        <table>
            <tr>
                <td>@Html.LabelFor(model => item.OrderNo)</td>
                <td>:</td>
                <td>@Html.DisplayFor(model => item.OrderNo)</td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => item.PayerName)</td>
                <td>:</td>
                <td>@Html.DisplayFor(model => item.PayerName)</td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => item.SenderAccountNo)</td>
                <td>:</td>
                <td>@Html.DisplayFor(model => item.SenderAccountNo)</td>
            </tr>
            <tr>
                <td>Bank</td>
                <td>:</td>
                <td>@Html.DisplayFor(model => item.bank.BankName)</td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => item.TransferAmount)</td>
                <td>:</td>
                <td>@Html.DisplayFor(model => item.TransferAmount)</td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => item.TotalAmount)</td>
                <td>:</td>
                <td>@Html.DisplayFor(model => item.TotalAmount)</td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => item.RefundAmount)</td>
                <td>:</td>
                <td>@Html.DisplayFor(model => item.RefundAmount)</td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => item.AgentID)</td>
                <td>:</td>
                <td>
                    @if (@item.AgentID == null)
                    {
                        @Html.EditorFor(model => item.AgentID);
                        @Html.Button("Search", new {Name = "name", Value = "value" });
                    }
                    else 
                    {
                        @Html.DisplayFor(model => item.AgentID);
                    }
                </td>
            </tr>
        </table>
        <p><input type="button" value="Konfirmasi" class="btnConfirm" /> @*<input type="button" value="Batal" class="btnVoid" />*@</p>
    </div>
}